{
  "meta": { "title": "Episode 1 – Welcome to the Dungeon" },
  "startScene": "prison_yard",
  "scenes": {
    "prison_yard": {
      "bg": "assets/backgrounds/prison_interior.png",
      "bounds": { "left": 80, "right": 1180, "ground": 620 },
      "player": { "x": 160, "y": 620, "sprite": "assets/sprites/characters/john.png" },
      "actors": [
        { "id": "carol", "sprite": "assets/sprites/characters/carol.png", "x": 520, "y": 620, "talkable": true, "onTalk": ["carol_intro"] },
        { "id": "mac", "sprite": "assets/sprites/characters/mac.png", "x": 680, "y": 620, "talkable": true, "onTalk": ["mac_tough"] },
        { "id": "jean", "sprite": "assets/sprites/characters/jean.png", "x": 1040, "y": 480, "alpha": 0.3, "ghost": true },
        { "id": "z1", "sprite": "assets/sprites/characters/zombie_rob.png", "x": 900, "y": 620, "ai": "zombie", "speed": 0.9 }
      ],
      "items": [
        { "id": "snack1", "sprite": "assets/objects/snack.png", "x": 320, "y": 600, "type": "cracker" }
      ],
      "doors": [
        { "to": "office", "x": 1180, "w": 60, "label": "Office →" }
      ]
    },

    "office": {
      "bg": "assets/backgrounds/office.png",
      "bounds": { "left": 80, "right": 1180, "ground": 620 },
      "player": { "x": 120, "y": 560, "sprite": "assets/sprites/characters/john.png" },
      "actors": [
        { "id": "ed", "sprite": "assets/sprites/characters/ed.png", "x": 380, "y": 580, "talkable": true, "onTalk": ["ed_roomba_joke"] },
        { "id": "jamaal", "sprite": "assets/sprites/characters/jamaal.png", "x": 820, "y": 560, "talkable": true, "onTalk": ["jamaal_scheme"] },
        { "id": "dave", "sprite": "assets/sprites/characters/dave.png", "x": 600, "y": 560, "talkable": true, "onTalk": ["dave_wisdom"] }
      ],
      "items": [
        { "id": "save", "sprite": "assets/objects/vending_machine.png", "x": 1040, "y": 540, "type": "save" },
        { "id": "fish_tank", "sprite": "assets/objects/fish_swim_in_tank_with_crack.png", "x": 520, "y": 580, "type": "flavor" }
      ],
      "doors": [
        { "to": "prison_yard", "x": 80, "w": 60, "label": "← Yard" }
      ]
    },

    "breakroom": {
      "bg": "assets/backgrounds/final_meal.png",
      "bounds": { "left": 80, "right": 1180, "ground": 620 },
      "player": { "x": 160, "y": 560, "sprite": "assets/sprites/characters/john.png" },
      "actors": [
        { "id": "ian", "sprite": "assets/sprites/characters/ian.png", "x": 420, "y": 560, "talkable": true, "onTalk": ["ian_mystical"] },
        { "id": "justin", "sprite": "assets/sprites/characters/justin.png", "x": 720, "y": 560, "talkable": true, "onTalk": ["justin_tech"] }
      ],
      "items": [],
      "doors": [
        { "to": "office", "x": 1180, "w": 60, "label": "Office →" }
      ]
    }
  },

  "dialogue": {
    "carol_intro": [
      "CAROL: You came back. I wasn't sure anyone would.",
      "JOHN: We're holding the yard. Stay close if things get rough."
    ],
    
    "mac_tough": [
      "MAC: Don't get soft on me, John. We need fighters, not talkers.",
      "JOHN: Everyone fights differently. You'll see.",
      "@if flags.carol_trust>0",
      "MAC: Maybe you're right. Carol proved me wrong.",
      "@end"
    ],

    "carol_snack": [
      "@if inventory.cracker>0",
      "CAROL: Is that... a bioinspired snack?",
      "JOHN: All yours.",
      "CAROL: Thank you. It's small, but it means something.",
      "@flag carol_trust +1",
      "@take cracker 1",
      "@end",
      "CAROL: I'm managing. Just hungry."
    ],

    "ed_roomba_joke": [
      "ED: Damn robo vacuum! Thing's got a mind of its own.",
      "JOHN: Dave's security system?",
      "ED: Security? More like comedy show. Watch your ankles."
    ],

    "jamaal_scheme": [
      "JAMAAL: This place has potential. Real potential.",
      "JOHN: For shelter, yes.",
      "JAMAAL: I'm thinking bigger. Resources. Trade routes.",
      "JOHN: Focus on survival first, Jamaal."
    ],

    "dave_wisdom": [
      "DAVE: The Roombas failed, but that's how we learn.",
      "JOHN: You always see the positive.",
      "DAVE: Someone has to. Chaos teaches us what works."
    ],

    "ian_mystical": [
      "IAN: The walls here... they remember things.",
      "JOHN: What kind of things?",
      "IAN: Pain. Loss. Rob C.'s fish incident.",
      "JOHN: That last one I believe."
    ],

    "justin_tech": [
      "JUSTIN: I've been working on beetle-armor prototypes!",
      "JOHN: Does it work?",
      "JUSTIN: Well... theoretically. Need to test it on walkers.",
      "JOHN: Be careful. Theory and practice are different."
    ]
  }
}